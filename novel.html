<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <title>ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø±ÙˆØ§ÙŠØ©</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    body { margin:0; font-family:system-ui,sans-serif; background:#0f0f12; color:#eee; }
    header { padding:16px; text-align:center; background:#16161d; font-size:20px; font-weight:bold; }
    main { padding:16px; }
    .poster { width:200px; height:300px; object-fit:cover; float:right; margin-left:16px; border-radius:8px; }
    h1 { margin-top:0; }
    .meta { color:#bbb; margin-bottom:12px; }
    .about { margin-bottom:16px; }
    ul.chapters { list-style:none; padding:0; }
    ul.chapters li { margin-bottom:8px; cursor:pointer; padding:6px; background:#1b1b24; border-radius:6px; transition:0.2s; }
    ul.chapters li:hover { background:#2a2a38; }
  </style>
</head>
<body>
<header>ğŸ“– ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø±ÙˆØ§ÙŠØ©</header>
<main id="content">
  Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...
</main>

<script>
const apiBase = "https://api.rewayat.club";

function getSlug() {
  return new URLSearchParams(window.location.search).get("slug");
}

async function loadNovel() {
  const slug = getSlug();
  if (!slug) return;

  const res = await fetch(`${apiBase}/api/novels/${slug}/`);
  const novel = await res.json();

  const content = document.getElementById("content");
  content.innerHTML = `
    <img class="poster" src="${apiBase + novel.poster_url}" alt="">
    <h1>${novel.arabic} (${novel.english})</h1>
    <div class="meta">
      ${novel.complete ? "Ù…ÙƒØªÙ…Ù„Ø©" : "Ù…Ø³ØªÙ…Ø±Ø©"} Â· ${novel.num_chapters} ÙØµÙ„
    </div>
    <div class="about">${novel.about}</div>
    <h3>Ø§Ù„ÙØµÙˆÙ„:</h3>
    <ul class="chapters" id="chapters"></ul>
  `;

  const chaptersList = document.getElementById("chapters");
  novel.chapters.forEach(ch => {
    const li = document.createElement("li");
    li.textContent = ch.title;
    li.addEventListener("click", () => {
      window.location.href = `chapter.html?slug=${slug}&chapter=${ch.number}`;
    });
    chaptersList.appendChild(li);
  });
}

loadNovel();
</script>
</body>
</html>
